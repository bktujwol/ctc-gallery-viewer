"use strict";class ctcOverlayViewer{constructor(a){this.prepareOverlay(this.addRemoveActiveGallery(a)),ctcOverlayViewer.onRequiredEventListener()}prepareOverlay(a){if(null==document.getElementById("ctcOverlayV")){let b=document.createElement("div");b.id="ctcOverlayV",b.className="ctcOverlayV",b.appendChild(a);let c=document.createElement("div");c.id="ctcOverlayImageContainerV",c.className="ctcOverlayImageContainerV";let d=document.createElement("div");d.id="ctcLoadedImgAltTitleV",d.className="ctcLoadedImgAltTitleV",c.appendChild(d);let e=document.createElement("span");e.id="ctcOverlayClosebtnV",e.className="ctcOverlayClosebtnV",e.setAttribute("title","close"),e.setAttribute("onclick","ctcOverlayViewer.closeOverlay();"),b.appendChild(e),b.appendChild(c),document.body.insertBefore(b,document.body.firstChild)}else return}checkRemoveOldGal(a){var b=document.getElementsByClassName("ctcActiveGalleryV");if(1<=b.length){var c=["data-v-img-number","onclick"],d=ctcOverlayViewer.objectToArray(b[0].getElementsByTagName("img"));d.map(e=>ctcOverlayViewer.removeElemAttr(c,ctcOverlayViewer.removeClass(["activeGalImgV"],e))),ctcOverlayViewer.removeClass(["ctcActiveGalleryV"],b[0])}return a}static applyStyle(a,b){let c="";return a.map(d=>c+=d[0]+":"+d[1]+";"),b.setAttribute("style",c),b}static setElemAttr(a,b){return a.map(c=>b.setAttribute(c[0],c[1])),b}static removeElemAttr(a,b){return a.map(c=>b.removeAttribute(c)),b}static addElemClass(a,b){return a.map(c=>b.classList.add(c)),b}static removeStyle(a,b){return a.map(()=>b.style.x[0]=""),b}static removeClass(a,b){return a.map(c=>b.classList.remove(c)),b}static removeElem(a){a.map(b=>b.parentNode.removeChild(b))}static objectToArray(a){var b=[];return Object.keys(a).map(function(c){Number.isInteger(parseInt(c))&&b.push(a[c])}),b}static applyAnimation(a,b){if("opacity"==a[0]&&0<a[1])var c=0,d=50,e=0,f=setInterval(()=>{c>=a[1]&&0>=d&&100<=e?clearInterval(f):(c+=0.1,d-=10,e+=20,c<=a[1]&&(b.style.opacity=c),0<=d&&(b.style.top=d+"%",b.style.right=d+"%",b.style.bottom=d+"%",b.style.left=d+"%"),100>=e&&(b.style.height=e+"%",b.style.width=e+"%"))},a[2]/5,f);else var c=a[1],d=0,e=100,f=setInterval(()=>{c<=a[1]&&50===d&&0===e?clearInterval(f):(c-=0.1,d+=5,e-=10,c>=a[1]&&(b.style.opacity=c),b.style.opacity=a[1],0>=e&&(b.style.height=e+"%",b.style.width=e+"%"),50<=d&&(b.style.top=d+"%",b.style.right=d+"%",b.style.bottom=d+"%",b.style.left=d+"%"))},a[2]/5,f);return b}addRemoveActiveGallery(a){if(!1===a.classList.contains("ctcActiveGalleryV")){ctcOverlayViewer.addElemClass(["ctcActiveGalleryV"],this.checkRemoveOldGal(a));var c=document.getElementById("ctcOverlayThumbGalleryContainerV");null===c?(c=ctcOverlayViewer.addElemClass(["ctcOverlayThumbGalleryContainerV"],document.createElement("div")),c.id="ctcOverlayThumbGalleryContainerV"):ctcOverlayViewer.removeElem(ctcOverlayViewer.objectToArray(document.getElementsByClassName("sideGalImgV")));var d=ctcOverlayViewer.objectToArray(a.getElementsByTagName("img"));d.length;let e=Math.round(0.045*window.screen.width);2<=d.length?d.map(function(f,g){ctcOverlayViewer.addElemClass(["activeGalImgV"],ctcOverlayViewer.setElemAttr([["onclick","ctcOverlayViewer.loadOverlayImages("+g+");"]],f));var h=[["background","url("+f.getAttribute("src")+")"],["height",e]],j=[["title",f.getAttribute("title")],["alt",f.getAttribute("alt")],["onclick","ctcOverlayViewer.loadOverlayImages("+g+");"]];c.appendChild(ctcOverlayViewer.addElemClass(["sideGalImgV"],ctcOverlayViewer.setElemAttr(j,ctcOverlayViewer.applyStyle(h,document.createElement("span")))))}):ctcOverlayViewer.addElemClass(["activeGalImgV"],ctcOverlayViewer.setElemAttr([["onclick","ctcOverlayViewer.loadOverlayImages(0);"]],d[0]))}return c}static closeOverlay(){ctcOverlayViewer.applyStyle([["opacity",0],["width","0px"]],ctcOverlayViewer.applyAnimation(["opacity",0,600],ctcOverlayViewer.applyStyle([["height","0px"]],document.getElementById("ctcOverlayV")))),document.getElementById("ctcOverlayImageContainerV").style.backgroundImage="",document.body.style.overflow="auto"}static loadOverlayImages(a){var b=document.querySelectorAll("img[onclick=\"ctcOverlayViewer.loadOverlayImages("+a+");\"]"),f=0,g=0,m=window.screen.width,n=window.screen.height,o=document.getElementById("ctcOverlayClosebtnV"),p=new Image,q=window.innerWidth,r=window.innerHeight,s=parseInt(a),t=document.getElementsByClassName("activeGalImgV").length,u=document.getElementById("ctcOverlayThumbGalleryContainerV");if(!(0>s||t<s+1)){var v=p.src=b[0].src;let w=document.getElementById("ctcOverlayV");document.body.style.overflow="hidden",(q!==m||n!==r)&&(m=q,n=r),0===w.offsetHeight?ctcOverlayViewer.applyAnimation(["opacity",1,500],ctcOverlayViewer.applyStyle([["opacity",1],["top","0"],["left","0"],["right","0"],["bottom","0"]],w)):ctcOverlayViewer.applyStyle([["opacity",1],["top","0"],["left","0"],["right","0"],["bottom","0"],["height","100%"],["width","100%"]],w);let y=120*(m/1280);50>y?y=50:70>y?y=70:120<y&&(y=120),document.body.style.overflow="hidden",ctcOverlayViewer.addElemClass(["overlayContentloadingV"],o),p.addEventListener("load",function(){var z=0.045*m;f=p.height,g=p.width;var A=0,B=0,C=0,D=0;if(g>=m&&f>=n)g>=f?g>f?(B=g/m,D=g/B-0.1*m,C=f*(D/g),C>=0.9*n&&(A=n/f,C=f*A-0.1*n,D=g*(C/f))):m>n?(C=0.9*n,D=C):n>m?(D=0.9*m,C=D):(A=n/f,C=f*A-0.1*n,D=g*(C/f)):(A=f/n,C=f/A-0.1*n,D=g*(C/f));else if(g>=m&&f<n)B=m/g,D=g*B-0.1*m,C=f*(D/g);else if(f>=n&&g<m)A=n/f,C=f*A-0.1*n,D=g*(C/f),C=f*(D/g);else{var E=0.9*m,F=0.9*n;if(g>=E&&f>=F){var G=avilableWidth/g;H=avilableHeight/f,D=avilableWidth*G,C=n*A}else if(g>=E&&f<F){var G=E/g;D=g*G,C=f*(D/g)}else if(f>=F&&g<E){var H=F/f;C=f*H,D=g*(C/f)}else D=g,C=f;C=f*(D/g)}D>0.9*m&&(D=0.9*m,C=f*(D/g));let I=document.getElementById("ctcGalleryRightNavV"),J=document.getElementById("ctcGalleryLeftNavV"),K=Math.round(n-C)/2,L=Math.round((C-1.6*y)/2),M=document.getElementById("ctcOverlayImageContainerV"),N=M.getAttribute("data-v-overlay-img"),O=Math.round(K-o.offsetHeight/1.2),P=document.querySelectorAll("span[onclick=\"ctcOverlayViewer.loadOverlayImages("+N+");\"]"),Q=document.querySelectorAll("span[onclick=\"ctcOverlayViewer.loadOverlayImages("+s+");\"]"),R=document.getElementById("ctcGalleryRightNavV"),S=document.getElementById("ctcGalleryLeftNavV");if(null!==R&&ctcOverlayViewer.removeElem([R]),null!==S&&ctcOverlayViewer.removeElem([S]),ctcOverlayViewer.removeClass(["overlayContentloadingV"],o),void 0!==P[0]&&ctcOverlayViewer.removeClass(["ctcOverlayThumbGalleryActiveV"],P[0]),2<=t){M.setAttribute("data-v-overlay-img",s);let W=Math.round(0.955*m-D)/2,X=[["background-image","url("+v+")"],["margin-left",W+"px"],["margin-top",K+"px"],["width",Math.round(D)+"px"],["height",Math.round(C)+"px"]];ctcOverlayViewer.applyStyle(X,M),51>y?ctcOverlayViewer.applyStyle([["margin-right",W+"px"],["margin-top",O+"px"],["font-size","35px"]],o):ctcOverlayViewer.applyStyle([["margin-right",W+"px"],["margin-top",O+"px"]],o);let Y=document.getElementById("ctcOverlayCountAndCurrentImageV");null===Y&&(Y=document.createElement("div"),Y.id="ctcOverlayCountAndCurrentImageV",Y.className="ctcOverlayCountAndCurrentImageV",M.appendChild(Y)),u.style.opacity="1";var T=ctcOverlayViewer.objectToArray(document.getElementsByClassName("sideGalImgV"));T.map(Z=>Z.style.height=z+"px"),t*(z+4)<n&&(T[0].style.marginTop=(n-t*(z+9))/2+"px"),T[a].scrollIntoView(!0),Q[0].classList.add("ctcOverlayThumbGalleryActiveV"),0<=s-1&&s+1<t?(M.appendChild(ctcOverlayViewer.addElemClass(["ctcGalleryRightNavV"],ctcOverlayViewer.setElemAttr([["title","Next Image"],["onclick","ctcOverlayViewer.loadOverlayImages("+(s+1)+");"],["id","ctcGalleryRightNavV"]],ctcOverlayViewer.applyStyle([["margin-top",L+"px"],["font-size",y+"px"]],document.createElement("span"))))),M.appendChild(ctcOverlayViewer.addElemClass(["ctcGalleryLeftNavV"],ctcOverlayViewer.setElemAttr([["title","Previous Image"],["onclick","ctcOverlayViewer.loadOverlayImages("+(s-1)+");"],["id","ctcGalleryLeftNavV"]],ctcOverlayViewer.applyStyle([["margin-top",L+"px"],["font-size",y+"px"]],document.createElement("span"))))),document.getElementById("ctcOverlayCountAndCurrentImageV").innerHTML=s+1+" of "+t):0>s-1&&s+1<t?(M.appendChild(ctcOverlayViewer.addElemClass(["ctcGalleryRightNavV"],ctcOverlayViewer.setElemAttr([["title","Next Image"],["onclick","ctcOverlayViewer.loadOverlayImages("+(s+1)+");"],["id","ctcGalleryRightNavV"]],ctcOverlayViewer.applyStyle([["margin-top",L+"px"],["font-size",y+"px"]],document.createElement("span"))))),document.getElementById("ctcOverlayCountAndCurrentImageV").innerHTML="Image "+(s+1)+" of "+t):0<=s-1&&s+1>=t&&(M.appendChild(ctcOverlayViewer.addElemClass(["ctcGalleryLeftNavV"],ctcOverlayViewer.setElemAttr([["title","Previous Image"],["onclick","ctcOverlayViewer.loadOverlayImages("+(s-1)+");"],["id","ctcGalleryLeftNavV"]],ctcOverlayViewer.applyStyle([["margin-top",L+"px"],["font-size",y+"px"]],document.createElement("span"))))),document.getElementById("ctcOverlayCountAndCurrentImageV").innerHTML="Image "+(s+1)+" of "+t)}else{let W=document.getElementById("ctcOverlayCountAndCurrentImageV");null!==W&&W.parentNode.removeChild(W),M.setAttribute("data-v-overlay-img",s);let X=Math.round((0.95*m-D)/2-u.offsetWidth/2.3);ctcOverlayViewer.applyStyle([["background-image","url("+v+")"],["margin-left",X+"px"],["margin-top",K+"px"],["width",D+"px"],["height",C+"px"]],M),ctcOverlayViewer.applyStyle([["margin-right",1.15*X+u.offsetWidth+"px"],["margin-top",O+"px"]],o)}let U=b[0].getAttribute("title"),V=document.getElementById("ctcLoadedImgAltTitleV");null===U?V.style.opacity="0":(V.innerHTML=U,V.style.opacity="1")})}}static onRequiredEventListener(){var a=document.getElementById("ctcOverlayV");window.addEventListener("resize",function(){if(null!==a&&0!==a.offsetHeight){var b=document.getElementById("ctcOverlayImageContainerV");ctcOverlayViewer.loadOverlayImages(b.getAttribute("data-v-overlay-img"))}}),window.addEventListener("keydown",function(b){if(0!==a.offsetHeight)if("ArrowUp"===b.code||"ArrowLeft"===b.code){let c=document.getElementById("ctcOverlayImageContainerV");ctcOverlayViewer.loadOverlayImages(parseInt(c.getAttribute("data-v-overlay-img"))-1),b.preventDefault()}else if("ArrowDown"===b.code||"ArrowRight"==b.code){let c=document.getElementById("ctcOverlayImageContainerV");ctcOverlayViewer.loadOverlayImages(parseInt(c.getAttribute("data-v-overlay-img"))+1),b.preventDefault()}else"Escape"==b.code&&(ctcOverlayViewer.closeOverlay(),b.preventDefault())})}}